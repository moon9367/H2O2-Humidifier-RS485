# H2O2 가습기 RS485 제어 시스템

아두이노 나노 2개를 사용한 RS485 통신 기반 가습기 제어 시스템입니다.

## 하드웨어 구성

### 노드 A (마스터)
- **펌프 릴레이**: D3
- **밸브 릴레이**: D4  
- **부저**: D5
- **시작 버튼**: D6 (풀업)
- **중지 버튼**: D7 (풀업)
- **RS485 DE/RE**: D2
- **RS485 RX**: D9
- **RS485 TX**: D10
- **OLED (SSD1306)**: SDA=A4, SCL=A5

### 노드 B (슬레이브)
- **습도 센서**: A0 (0~5V)
- **RS485 DE/RE**: D2
- **RS485 RX**: D9
- **RS485 TX**: D10

## 라이브러리 요구사항

### 노드 A (마스터)
```
Adafruit_GFX
Adafruit_SSD1306
```

### 노드 B (슬레이브)
```
SoftwareSerial (내장)
```

## 동작 방식

### 마스터 노드
1. 시작 버튼 누르면 경고음 후 펌프와 밸브 작동
2. 매초 슬레이브에 "REQ" 요청
3. 습도값을 OLED에 표시 ("72 %" 형태)
4. 습도 평균 90% 이상 연속 3회 시 완료 신호음 후 정지
5. 센서 오류나 응답 없음 3회 연속 시 오류 부저 패턴 후 정지

### 슬레이브 노드
1. A0에서 습도 센서 값 읽기 (0~1023 → 0~100%)
2. 마스터로부터 "REQ" 수신 시 현재 습도값 전송
3. 센서 값이 비정상(0 또는 1023 고정)일 경우 "ERR" 전송

## 통신 프로토콜

- **통신 속도**: 9600 bps
- **마스터 → 슬레이브**: "REQ" (습도 요청)
- **슬레이브 → 마스터**: 습도값 (0~100) 또는 "ERR"

## 설치 및 사용법

1. 각 노드에 해당 코드 업로드
2. 하드웨어 연결 (핀 정의 참조)
3. RS485 모듈 연결 (A+와 B-)
4. 전원 공급 후 시리얼 모니터로 동작 확인

## 디버깅

양쪽 코드 모두 Serial.print()를 통해 통신 상태를 확인할 수 있습니다:
- 전송/수신 데이터 표시
- 습도값 및 평균값 표시
- 오류 발생 횟수 표시
